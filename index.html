<html>
    <head>
        <meta charset="utf-8">
        <style>
            body {
                height: 350px;
                width: 350px;
            }
            
            .center {
                text-align: center;
            }
            
            #MyTime {
                font-family: Arial;
                font-size: 270%;
                color: rgb(67, 144, 226);
            }
            
            #MyDate {
                font-family: Arial;
                font-size: 150%;
                color: rgb(120, 141, 188);
            }
            
            #calendar {
                width: 100%;
                font: monospace;
                line-height: 1.2em;
                font-size: 15px;
                text-align: center;
            }
            #calendar thead tr:last-child {
                font-size: small;
                color: rgb(85, 85, 85);
            }
            #calendar thead tr:nth-child(1) td:nth-child(2) {
                color: rgb(50, 50, 50);
            }
            #calendar tbody td {
                color: rgb(44, 86, 122);
            }
            #calendar tbody td:nth-child(n+6), #calendar .holiday {
                color: rgb(231, 140, 92);
            }
            
            #calendar tbody td.today {
                background: rgb(220, 0, 0);
                color: #fff;
            }
            #calendar tbody td.other {
                color: gray;
            }
        </style>
    </head>
    <body onload="time_now()">
        <script>
        /*
            function Calendar(id, year, month) {
                var Dlast = new Date(year, month + 1, 0).getDate(); // последний день месяца
                var D = new Date(year, month, Dlast); 
                var DNlast = new Date(D.getFullYear(), D.getMonth(), Dlast).getDay();  // день недели последнего дня месяца
                var DNfirst = new Date(D.getFullYear(), D.getMonth(), 1).getDay(); // день недели первого дня месяца
                
                var calendar = '<tr>';
                
                // пустые клетки до первого дня текущего месяца
                if (DNfirst != 0) {
                    for (var i = 1; i < DNfirst; i++) {
                        calendar += '<td>';
                    }
                } else {
                    // если первый день месяца выпадает на воскресенье, то требуется 7 пустых клеток 
                    for (var i = 0; i < 6; i++) {
                        calendar += '<td>';
                    }
                }
                
                // дни месяца
                for (var i = 1; i <= Dlast; i++) {
                    if (i == new Date().getDate() && D.getFullYear() == new Date().getFullYear() && D.getMonth() == new Date().getMonth()) {
                        // сегодняшней дате можно задать стиль CSS
                        calendar += '<td class="today">' + i;
                    } else {
                        calendar += '<td>' + i;
                    }
                    
                    // если день выпадает на воскресенье, то перевод строки
                    if (new Date(D.getFullYear(), D.getMonth(), i).getDay() == 0) {
                        calendar += '<tr>';
                    }
                }
                
                // пустые клетки после последнего дня месяца
                for (var i = DNlast; i < 7; i++) {
                    calendar += '<td>&nbsp;';
                }
                document.querySelector('#' + id + ' tbody').innerHTML = calendar;
            }
        */
        
            function Calendar(id, date) {
                var year = date.getFullYear();
                var month = date.getMonth();
            
                // Последний день месяца
                var Dlast = new Date(year, month + 1, 0).getDate();
                var D = new Date(year, month, Dlast); 
                
                // День недели последнего дня месяца
                var DNlast = new Date(D.getFullYear(), D.getMonth(), Dlast).getDay();
                
                // День недели первого дня месяца
                var DNfirst = new Date(D.getFullYear(), D.getMonth(), 1).getDay();
                
                // TODO: не совсем правильно работает, если первый день месяца -- понедельник
                // нужно чтобы первой строкой были предыдущие дни, иначе последняя строка таблицы
                // полностью заполнена днями следующего месяца
                
                // Для контроля того, что строк календаря с датами будет 6 штук
                var rowNumber = 6 - 1; // - 1 т.к. первый tr уже есть
                var calendar = '<tr>';
                
                // Если первый день месяца выпадает на воскресенье
                // Все из-за того, что воскресенье 0, а не 7
                var firstDay = DNfirst;
                if (DNfirst == 0) {
                    firstDay = 7;
                }
                
                // Добавление дней следующего месяца
                for (var i = 1; i < firstDay; i++) {
                    // Если в Date в дне указывать 0, то получаем последний день предыдущего
                    // месяца, соответственно, если указывать -1, то предпоследний день предыдущего
                    // месяца и т.д.    
                    var day = new Date(year, month, i - firstDay + 1).getDate();
                    calendar += '<td class="other">' + day + '</td>';
                }
                
                // Дни месяца
                for (var i = 1; i <= Dlast; i++) {
                    var td = "<td";
                    
                    // Выделение текущего дня
                    if (i == date.getDate()) {
                        td += ' class="today"'
                    }
                    td += ">" + i + '</td>';
                    
                    calendar += td;
                    
                    // Если день выпадает на воскресенье, то перевод строки
                    if (new Date(D.getFullYear(), D.getMonth(), i).getDay() == 0) {
                        calendar += '</tr><tr>';
                        rowNumber--;
                    }
                }

                // Добавление дней следующего месяца
                var nextMonthDay = 1;
                for (var i = DNlast; i < 7; i++) {
                    var day = new Date(year, month + 1, nextMonthDay).getDate();
                    calendar += '<td class="other">' + day + '</td>';
                    
                    nextMonthDay++;
                }
                calendar += "</tr>";
                
                // Дозаполнеие таблицы до rowNumber строк
                for (var i = 0; i < rowNumber; i++) {
                    calendar += "<tr>";
                
                    for (var j = 0; j < 7; j++) {
                        var day = new Date(year, month + 1, nextMonthDay).getDate();
                        calendar += '<td class="other">' + day + '</td>';
                        
                        nextMonthDay++;
                    }
                    
                    calendar += "</tr>";
                }

                // <tr><td>Пн</td><td>Вт</td><td>Ср</td><td>Чт</td><td>Пт</td><td>Сб</td><td>Вс</td></tr>-->
                var labelHeaders = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];
                var header = "<tr>";
                for (var i in labelHeaders) {
                    header += "<th>" + labelHeaders[i] + "</th>";
                }
                
                header += "</tr>"
                document.querySelector('#' + id + ' thead').innerHTML = header;
                document.querySelector('#' + id + ' tbody').innerHTML = calendar;
            }
        
            function time_now() {
                var date = new Date();
                //date = new Date(2016, 12, 01);

                //var daysOfWeek = ['воскресенье', 'понедельник', 'вторник', 'среда', 'четверг', 'пятница', 'суббота'];
                var daysOfWeek = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
                
                //var month = ['января', 'февраля', 'марта', 'апреля', 'мая', 'июня', 'июля', 'августа', 'сентября', 'октября', 'ноября', 'декабря'];
                var month = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];

                var hours = date.getHours();
                if (hours < 10) {
                    hours = "0" + hours;           
                }
                
                var minutes = date.getMinutes();
                if (minutes < 10) {
                    minutes = "0" + minutes;
                }
                
                var seconds = date.getSeconds();
                if (seconds < 10) {
                    seconds = "0" + seconds;
                }
                
                var textTime = hours + ":" + minutes + ":" + seconds;
                var textDate = daysOfWeek[date.getDay()] + ", " + date.getDate() + " " + month[date.getMonth()].toLowerCase() + ", " + date.getFullYear();
                document.getElementById('MyTime').innerHTML = textTime;
                document.getElementById('MyDate').innerHTML = textDate;
                
                //Calendar("calendar", date.getFullYear(), date.getMonth());
                
                Calendar("calendar", date);
                
                setTimeout(time_now, 1000);     
            }  
        </script>
        
        <div class="center">
            <div id="MyTime"></div>
            <div id="MyDate"></div>
            
            <br>
            <div id="MyCalendar">
                <table id="calendar">
                    <thead>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </div>
        </div>
    </body>
</html>
